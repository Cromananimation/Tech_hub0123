
{{#each posts as |post|}}
  <div class="card w-300 bg-zinc-800 shadow-xl prose" id="post-{{post.id}}">
    <div class="card-body">
      <h1 class="card-title">{{post.title}}</h2>

      {{#ifEq post.type 'text'}}
        <p>{{post.body}}</p>
      {{/ifEq}}

      {{#ifEq post.type 'video'}}
       <video width="320" height="240" controls>
          <source src="{{post.body}}" type="video/mp4">
          Your browser does not support the video tag.
      </video> 
      {{/ifEq}}

      {{#ifEq post.type 'image'}}
        <figure><img src="{{post.body}}" alt="{{post.title}}" /></figure>
      {{/ifEq}}

      {{#ifEq post.type 'link'}}
        <a href="{{post.body}}">{{post.title}}</a>
      {{/ifEq}}

      {{{build_comment_tree post.comments ../logged_in_user}}}
    </div>

    {{#ifEq post.user_id ../logged_in_user}}
      <button class="btn btn-primary edit-post" id="{{post.id}}">edit post</button>
    {{/ifEq}}

  </div>
{{/each}}

<dialog class="modal justify-center" id="post-dialog">
  <form method="dialog" class="modal-box grid grid-cols-1 gap-4" id="post-form">
    <input
      type="text"
      id="post-title"
      placeholder="post title"
      class="form-input"
    />

    <select id="post-type" class="form-input">
      <option disabled selected>Select a post type</option>
      <option>text</option>
      <option>image</option>
      <option>video</option>
      <option>link</option>
    </select>

    <textarea
      id="post-body"
      class="textarea textarea-bordered"
    ></textarea>

    <div class="modal-action">
      <button class="btn" id="post-cancel">Cancel</button>
      <button class="btn" id="post-save">Save</button>
    </div>
  </form>
</dialog>


<dialog class="modal justify-center" id="edit-post-dialog">
  <form method="dialog" class="modal-box grid grid-cols-1 gap-4" id="edit-form">
    <input type="hidden" id="edit-post-id" name="id">

    <input
      type="text"
      id="edit-post-title"
      placeholder="post title"
      class="form-input"
    />

    <select id="edit-post-type" class="form-input">
      <option disabled selected>Select a post type</option>
      <option>text</option>
      <option>image</option>
      <option>video</option>
      <option>link</option>
    </select>

    <textarea
      id="edit-post-body"
      class="textarea textarea-bordered"
    ></textarea>

    <div class="modal-action">
      <button class="btn" id="edit-post-cancel">Cancel</button>
      <button class="btn" id="edit-post-save">Save</button>
    </div>
  </form>
</dialog>
